(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{472:function(e,t,n){"use strict";n(32),n(28);t.a={data:function(){return{allowedImageExtensions:/(\.jpg|\.jpeg|\.png|\.svg|\.webp|\.gif)$/i,allowedVideoExtensions:/(\.mp4)$/i,allowedExcelExtensions:/(\.xlsx)$/i,passwordLength:6,maxImageSize:this.$store.state.media.image,maxExcelSize:this.$store.state.media.file,maxVideoSize:this.$store.state.media.video,reg:/^(([^<>()\]\\.,;:\s@"]+(\.[^<>()\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,24}))$/}},methods:{isValidExcel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maxExcelSize;return e.size>1024*t?this.$t("util.fSize",{size:t}):this.allowedExcelExtensions.exec(e.name)?null:this.$t("util.invFile")},isValidImage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maxImageSize,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.size>1024*t?this.$t("util.fSize",{size:t}):n&&!this.allowedImageExtensions.exec(e.name)?this.$t("util.invFile"):n||this.allowedVideoExtensions.exec(e.name)?null:this.$t("util.invFile")},isValidEmail:function(e){return this.reg.test(e)},isValidLength:function(e){return e&&e.length>=this.passwordLength||!1}}}},709:function(e,t,n){"use strict";n.r(t);n(726),n(7),n(28),n(36),n(106),n(731),n(735),n(736),n(737),n(738),n(739),n(740),n(741),n(742),n(743),n(744),n(745),n(746),n(747),n(748),n(750),n(751),n(752),n(753),n(754),n(755),n(756),n(757),n(758),n(35),n(296),n(125);var o=n(156),l=n(86),r=n(472),d={name:"VideoUpload",data:function(){return{scaleFactor:"",uploadMessage:null}},mixins:[l.a,r.a],components:{AjaxButton:o.default},props:{type:{type:String,default:"image"},fileUploading:{type:Boolean,default:!1},video:{type:String,default:""},image:{type:String,default:""},imageTitle:{type:String,default:""},btnText:{type:String,default:"Upload"}},computed:{isImage:function(){return"image"===this.type},errors:function(){return this.ERRORS&&this.ERRORS[this.type]},videoName:function(){return this.video||""},imageName:function(){var e;return null!==(e=this.image)&&void 0!==e?e:this.defaultImage}},methods:{dataURLtoFile:function(e,t){for(var n=e.split(","),o=n[0].match(/:(.*?);/)[1],l=atob(n[1]),r=l.length,d=new Uint8Array(r);r--;)d[r]=l.charCodeAt(r);return new File([d],t,{type:o})},capture:function(e){var video=document.getElementById("video");document.getElementById("source").src=URL.createObjectURL(e),video.load();var t=!1,n=this;video.addEventListener("loadeddata",(function(){if(t)return!1;t=!0;var o=this.videoWidth,l=this.videoHeight,canvas=document.createElement("canvas");canvas.width=o,canvas.height=l,canvas.getContext("2d").drawImage(this,0,0,o,l);var r=canvas.toDataURL("image/jpeg"),d={canvas:canvas,file:n.dataURLtoFile(r,"".concat(+new Date,".jpg")),base64:r};n.$emit("file-upload",{video:e,thumb:d.file})}))},fileChanged:function(e){var t=e.target.files[0];t&&(this.uploadMessage=this.isValidImage(t,this.maxVideoSize,!1),this.uploadMessage||this.capture(t))}}},c=n(15),component=Object(c.a)(d,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"file-wrapper",class:{"has-error":e.uploadMessage}},[t("div",{staticClass:"file-input",class:{"pt-0":!e.isImage}},[t("input",{ref:"fileInput",attrs:{type:"file",accept:"video/*"},on:{change:e.fileChanged}}),e._v(" "),e.isImage?t("img",{attrs:{src:e.getImageURL(e.imageName),alt:e.imageTitle}}):t("div",[e.videoName?t("video",{attrs:{controls:"",autostart:"0"}},[t("source",{attrs:{src:e.getVideoURL(e.videoName),type:"video/mp4"}})]):t("div",[e._v("\n        "+e._s(e.$t("prod.noVid"))+"\n      ")])]),e._v(" "),e._m(0)]),e._v(" "),e.uploadMessage?t("span",{staticClass:"error mb-10"},[e._v("\n    "+e._s(e.uploadMessage)+"\n  ")]):e._e(),e._v(" "),t("ajax-button",{staticClass:"outline-btn",attrs:{type:"button",text:e.btnText,color:"primary","loading-text":e.$t("error.up"),"fetching-data":e.fileUploading},on:{clicked:function(t){return e.$refs.fileInput.click()}}})],1)}),[function(){var e=this._self._c;return e("video",{staticStyle:{height:"0",width:"0",opacity:"0"},attrs:{id:"video",controls:"",autoplay:""}},[e("source",{attrs:{id:"source",type:"video/mp4"}})])}],!1,null,null,null);t.default=component.exports;installComponents(component,{AjaxButton:n(156).default})}}]);